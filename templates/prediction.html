{% extends 'base.html' %}
{% block title %} Sunset Prediction {% endblock %}
{% block style %}
<style type="text/css">

    #map {
        height:600px;
        width:600px;
    }

</style>
{% endblock %}

{% block content %}

<input type='hidden' id='user_lat' value="{{ userLat }}">
<input type='hidden' id='user_lon' value="{{ userLon }}">

<h1> Here is my prediction: </h1>

<h2> {{ description }} </h2>

<p> SUNSET TIME: {{sunset_time}} UTC </p>
<p> CURRENT TIME: {{ current_utc.time()}} UTC

<p>
{{ airport_obj.icao_code }}<br>
{{ airport_obj.airport_name }}<br>
</p>

<p>

    
    {{forecast['timestamp']['forecast_from']}}<br>
    {{forecast['timestamp']['forecast_to']}}<br>
    {{forecast['clouds']}}<br><br>


</p>

<!-- Trying to get the map to work: -->

<div id='map'></div>
<script src="https://code.jquery.com/jquery.js"></script>



<script type="text/javascript">
function initMap() {
    let user_lat = parseFloat($('#user_lat').val())
    let user_lon = parseFloat($('#user_lon').val())

    let yourPosition = {lat: user_lat, lng: user_lon};
        console.log(yourPosition)

    let map = new google.maps.Map(document.querySelector('#map'), {
        center: yourPosition,
        zoom: 11,
    });
}
</script>
<script src="{{ mapsapiurl }}"
async defer></script>


{% endblock %}